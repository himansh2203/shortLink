(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18184,e=>{"use strict";var t=e.i(43476),l=e.i(71645);let s=/^[A-Za-z0-9]{6,8}$/,a=/^(https?:\/\/).+/i;function r({onCreated:e}){let[r,i]=(0,l.useState)(""),[n,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null),[u,p]=(0,l.useState)(null);async function f(t){if(t.preventDefault(),x(null),p(null),!a.test(r))return void x("Invalid URL. Include http:// or https://");if(n&&!s.test(n))return void x("Custom code must be 6-8 alphanumeric characters.");o(!0);try{let t=await fetch("/api/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r,code:n||void 0})});if(409===t.status)x("Code already exists.");else if(t.ok){let l=await t.json();p(l.shortUrl),i(""),c(""),e&&e()}else{let e=await t.json().catch(()=>({}));x(e?.error||"Create failed")}}catch{x("Network error")}finally{o(!1)}}return(0,t.jsxs)("form",{onSubmit:f,className:"p-4 space-y-3 max-w-xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Long URL"}),(0,t.jsx)("input",{value:r,onChange:e=>i(e.target.value),placeholder:"https://...",required:!0,disabled:d})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Custom code (optional)"}),(0,t.jsx)("input",{value:n,onChange:e=>c(e.target.value),placeholder:"6-8 letters/numbers",disabled:d})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:d,children:d?"Creating...":"Create"})}),h&&(0,t.jsx)("div",{style:{color:"crimson"},children:h}),u&&(0,t.jsxs)("div",{style:{color:"green"},children:["Created:"," ",(0,t.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:u})]})]})}e.s(["default",()=>r])},36517,e=>{"use strict";var t=e.i(43476),l=e.i(71645);function s({links:e,onDeleted:s}){let[a,r]=(0,l.useState)(e??[]);(0,l.useEffect)(()=>{r(e??[])},[e]);let i=async e=>{try{await navigator.clipboard.writeText(`${window.location.origin}/${e}`)}catch{}},n=async e=>{if(confirm(`Delete short code "${e}"? This cannot be undone.`))try{let t=await fetch(`/api/links/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json().catch(()=>({}));alert(e?.error||"Delete failed");return}s?await s(e):r(t=>t.filter(t=>t.code!==e))}catch{alert("Network error")}};return a.length?(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-3 py-2",children:"Code"}),(0,t.jsx)("th",{className:"text-left px-3 py-2",children:"Target URL"}),(0,t.jsx)("th",{className:"text-left px-3 py-2",children:"Clicks"}),(0,t.jsx)("th",{className:"text-left px-3 py-2",children:"Last clicked"}),(0,t.jsx)("th",{className:"px-3 py-2",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:a.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-3 py-2 font-mono text-sm",children:(0,t.jsx)("a",{href:`/${e.code}`,className:"text-blue-600 hover:underline",children:e.code})}),(0,t.jsx)("td",{className:"px-3 py-2 max-w-xl",children:(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"block text-sm text-gray-700 hover:underline",title:e.url,children:e.url})}),(0,t.jsx)("td",{className:"px-3 py-2",children:e.clicks}),(0,t.jsx)("td",{className:"px-3 py-2 text-sm text-gray-500",children:e.lastClicked?new Date(e.lastClicked).toLocaleString():"â€”"}),(0,t.jsxs)("td",{className:"px-3 py-2 space-x-2",children:[(0,t.jsx)("button",{onClick:()=>i(e.code),className:"px-2 py-1 border rounded text-sm",children:"Copy"}),(0,t.jsx)("button",{onClick:()=>n(e.code),className:"px-2 py-1 bg-red-600 text-white rounded text-sm",children:"Delete"})]})]},e.code))})]})}):(0,t.jsx)("div",{className:"p-4 text-sm text-gray-600",children:"No links yet."})}e.s(["default",()=>s])},31713,e=>{"use strict";var t=e.i(47167),l=e.i(43476),s=e.i(71645),a=e.i(18184),r=e.i(36517);function i({params:e}){let i=String(e?.code??"");(t.default.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000").replace(/\/$/,""),encodeURIComponent(i);let[n,c]=(0,s.useState)(null),[d,o]=(0,s.useState)(!1);async function h(){o(!0);let e=await fetch("/api/links"),t=await e.json().catch(()=>[]);c(Array.isArray(t)?t:[]),o(!1)}return(0,s.useEffect)(()=>{h()},[]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"Dashboard"}),(0,l.jsx)(a.default,{onCreated:h}),(0,l.jsx)("hr",{}),d?(0,l.jsx)("div",{children:"Loading..."}):(0,l.jsx)(r.default,{links:n??[],onDeleted:h})]})}e.s(["default",()=>i])}]);
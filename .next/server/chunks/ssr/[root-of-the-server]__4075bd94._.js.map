{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../components/UrlList.tsx","../../../../components/UrlForm.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\nimport React, { useEffect, useState } from \"react\";\n\ntype Item = { code: string; url: string; clicks: number; lastClicked?: string | null };\n\nexport default function UrlList({\n  links,\n  onDeleted,\n}: {\n  links?: Item[] | null;\n  onDeleted?: (code: string) => Promise<void> | void;\n}) {\n  const [items, setItems] = useState<Item[]>(links ?? []);\n\n  useEffect(() => {\n    setItems(links ?? []);\n  }, [links]);\n\n  const handleCopy = async (code: string) => {\n    try {\n      await navigator.clipboard.writeText(`${window.location.origin}/${code}`);\n    } catch {\n      /* ignore */\n    }\n  };\n\n  const handleDelete = async (code: string) => {\n    if (!confirm(`Delete short code \"${code}\"? This cannot be undone.`)) return;\n    try {\n      const res = await fetch(`/api/links/${code}`, { method: \"DELETE\" });\n      if (!res.ok) {\n        const err = await res.json().catch(() => ({}));\n        alert(err?.error || \"Delete failed\");\n        return;\n      }\n\n      // If parent provided a refresh callback, call it so parent reloads fresh data.\n      if (onDeleted) {\n        await onDeleted(code);\n      } else {\n        // Otherwise update local UI state\n        setItems((prev) => prev.filter((i) => i.code !== code));\n      }\n    } catch {\n      alert(\"Network error\");\n    }\n  };\n\n  if (!items.length) {\n    return <div className=\"p-4 text-sm text-gray-600\">No links yet.</div>;\n  }\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <table className=\"min-w-full divide-y\">\n        <thead>\n          <tr>\n            <th className=\"text-left px-3 py-2\">Code</th>\n            <th className=\"text-left px-3 py-2\">Target URL</th>\n            <th className=\"text-left px-3 py-2\">Clicks</th>\n            <th className=\"text-left px-3 py-2\">Last clicked</th>\n            <th className=\"px-3 py-2\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {items.map((l) => (\n            <tr key={l.code} className=\"border-t\">\n              <td className=\"px-3 py-2 font-mono text-sm\">\n                <a href={`/${l.code}`} className=\"text-blue-600 hover:underline\">\n                  {l.code}\n                </a>\n              </td>\n              <td className=\"px-3 py-2 max-w-xl\">\n                <a href={l.url} target=\"_blank\" rel=\"noreferrer\" className=\"block text-sm text-gray-700 hover:underline\" title={l.url}>\n                  {l.url}\n                </a>\n              </td>\n              <td className=\"px-3 py-2\">{l.clicks}</td>\n              <td className=\"px-3 py-2 text-sm text-gray-500\">{l.lastClicked ? new Date(l.lastClicked).toLocaleString() : \"â€”\"}</td>\n              <td className=\"px-3 py-2 space-x-2\">\n                <button onClick={() => handleCopy(l.code)} className=\"px-2 py-1 border rounded text-sm\">\n                  Copy\n                </button>\n                <button onClick={() => handleDelete(l.code)} className=\"px-2 py-1 bg-red-600 text-white rounded text-sm\">\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}","\"use client\";\nimport React, { useState } from \"react\";\n\nconst CODE_REGEX = /^[A-Za-z0-9]{6,8}$/;\nconst URL_REGEX = /^(https?:\\/\\/).+/i;\n\nexport default function UrlForm({ onCreated }: { onCreated?: () => void }) {\n  const [url, setUrl] = useState(\"\");\n  const [code, setCode] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setError(null);\n    setSuccess(null);\n\n    if (!URL_REGEX.test(url)) {\n      setError(\"Invalid URL. Include http:// or https://\");\n      return;\n    }\n    if (code && !CODE_REGEX.test(code)) {\n      setError(\"Custom code must be 6-8 alphanumeric characters.\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/links\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ url, code: code || undefined }),\n      });\n      if (res.status === 409) {\n        setError(\"Code already exists.\");\n      } else if (!res.ok) {\n        const d = await res.json().catch(() => ({}));\n        setError(d?.error || \"Create failed\");\n      } else {\n        const data = await res.json();\n        setSuccess(data.shortUrl);\n        setUrl(\"\");\n        setCode(\"\");\n        if (onCreated) onCreated();\n      }\n    } catch {\n      setError(\"Network error\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-4 space-y-3 max-w-xl\">\n      <div>\n        <label>Long URL</label>\n        <input\n          value={url}\n          onChange={(e) => setUrl(e.target.value)}\n          placeholder=\"https://...\"\n          required\n          disabled={loading}\n        />\n      </div>\n      <div>\n        <label>Custom code (optional)</label>\n        <input\n          value={code}\n          onChange={(e) => setCode(e.target.value)}\n          placeholder=\"6-8 letters/numbers\"\n          disabled={loading}\n        />\n      </div>\n      <div>\n        <button type=\"submit\" disabled={loading}>\n          {loading ? \"Creating...\" : \"Create\"}\n        </button>\n      </div>\n      {error && <div style={{ color: \"crimson\" }}>{error}</div>}\n      {success && (\n        <div style={{ color: \"green\" }}>\n          Created:{\" \"}\n          <a href={success} target=\"_blank\" rel=\"noopener noreferrer\">\n            {success}\n          </a>\n        </div>\n      )}\n    </form>\n  );\n}"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}
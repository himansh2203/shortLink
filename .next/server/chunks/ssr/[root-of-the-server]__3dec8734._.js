module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},59308,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=/^[A-Za-z0-9]{6,8}$/,e=/^(https?:\/\/).+/i;function f({onCreated:a}){let[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null);async function p(b){if(b.preventDefault(),m(null),o(null),!e.test(f))return void m("Invalid URL. Include http:// or https://");if(h&&!d.test(h))return void m("Custom code must be 6-8 alphanumeric characters.");k(!0);try{let b=await fetch("/api/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:f,code:h||void 0})});if(409===b.status)m("Code already exists.");else if(b.ok){let c=await b.json();o(c.shortUrl),g(""),i(""),a&&a()}else{let a=await b.json().catch(()=>({}));m(a?.error||"Create failed")}}catch{m("Network error")}finally{k(!1)}}return(0,b.jsxs)("form",{onSubmit:p,className:"p-4 space-y-3 max-w-xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Long URL"}),(0,b.jsx)("input",{value:f,onChange:a=>g(a.target.value),placeholder:"https://...",required:!0,disabled:j})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Custom code (optional)"}),(0,b.jsx)("input",{value:h,onChange:a=>i(a.target.value),placeholder:"6-8 letters/numbers",disabled:j})]}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"submit",disabled:j,children:j?"Creating...":"Create"})}),l&&(0,b.jsx)("div",{style:{color:"crimson"},children:l}),n&&(0,b.jsxs)("div",{style:{color:"green"},children:["Created:"," ",(0,b.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:n})]})]})}a.s(["default",()=>f])},11646,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({links:a,onDeleted:d}){let[e,f]=(0,c.useState)(a??[]);(0,c.useEffect)(()=>{f(a??[])},[a]);let g=async a=>{try{await navigator.clipboard.writeText(`${window.location.origin}/${a}`)}catch{}},h=async a=>{if(confirm(`Delete short code "${a}"? This cannot be undone.`))try{let b=await fetch(`/api/links/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json().catch(()=>({}));alert(a?.error||"Delete failed");return}d?await d(a):f(b=>b.filter(b=>b.code!==a))}catch{alert("Network error")}};return e.length?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-3 py-2",children:"Code"}),(0,b.jsx)("th",{className:"text-left px-3 py-2",children:"Target URL"}),(0,b.jsx)("th",{className:"text-left px-3 py-2",children:"Clicks"}),(0,b.jsx)("th",{className:"text-left px-3 py-2",children:"Last clicked"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:e.map(a=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-3 py-2 font-mono text-sm",children:(0,b.jsx)("a",{href:`/${a.code}`,className:"text-blue-600 hover:underline",children:a.code})}),(0,b.jsx)("td",{className:"px-3 py-2 max-w-xl",children:(0,b.jsx)("a",{href:a.url,target:"_blank",rel:"noreferrer",className:"block text-sm text-gray-700 hover:underline",title:a.url,children:a.url})}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.clicks}),(0,b.jsx)("td",{className:"px-3 py-2 text-sm text-gray-500",children:a.lastClicked?new Date(a.lastClicked).toLocaleString():"â€”"}),(0,b.jsxs)("td",{className:"px-3 py-2 space-x-2",children:[(0,b.jsx)("button",{onClick:()=>g(a.code),className:"px-2 py-1 border rounded text-sm",children:"Copy"}),(0,b.jsx)("button",{onClick:()=>h(a.code),className:"px-2 py-1 bg-red-600 text-white rounded text-sm",children:"Delete"})]})]},a.code))})]})}):(0,b.jsx)("div",{className:"p-4 text-sm text-gray-600",children:"No links yet."})}a.s(["default",()=>d])},60350,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(59308),e=a.i(11646);function f({params:a}){let f=String(a?.code??"");(process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000").replace(/\/$/,""),encodeURIComponent(f);let[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1);async function k(){j(!0);let a=await fetch("/api/links"),b=await a.json().catch(()=>[]);h(Array.isArray(b)?b:[]),j(!1)}return(0,c.useEffect)(()=>{k()},[]),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{children:"Dashboard"}),(0,b.jsx)(d.default,{onCreated:k}),(0,b.jsx)("hr",{}),i?(0,b.jsx)("div",{children:"Loading..."}):(0,b.jsx)(e.default,{links:g??[],onDeleted:k})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3dec8734._.js.map